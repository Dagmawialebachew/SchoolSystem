{% extends "base.html" %}
{% block content %}
<div class="p-6">
  <h1 class="text-2xl font-bold mb-6">Owner Dashboard 🏫</h1>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
    <div class="bg-white shadow rounded-xl p-4">
      <p class="text-gray-500">Schools</p>
      <h2 class="text-2xl font-bold">{{ schools_count }}</h2>
    </div>
    <div class="bg-white shadow rounded-xl p-4">
      <p class="text-gray-500">Teachers</p>
      <h2 class="text-2xl font-bold">{{ teachers_count }}</h2>
    </div>
    <div class="bg-white shadow rounded-xl p-4">
      <p class="text-gray-500">Students</p>
      <h2 class="text-2xl font-bold">{{ students_count }}</h2>
    </div>
    <div class="bg-white shadow rounded-xl p-4">
      <p class="text-gray-500">Classes</p>
      <h2 class="text-2xl font-bold">{{ classes_count }}</h2>
    </div>
  </div>

  <!-- Finance Overview -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
    <div class="bg-green-100 shadow rounded-xl p-4">
      <p class="text-gray-500">Total Paid</p>
      <h2 class="text-2xl font-bold text-green-700">${{ total_paid }}</h2>
    </div>
    <div class="bg-yellow-100 shadow rounded-xl p-4">
      <p class="text-gray-500">Total Due</p>
      <h2 class="text-2xl font-bold text-yellow-700">${{ total_due }}</h2>
    </div>
    <div class="bg-red-100 shadow rounded-xl p-4">
      <p class="text-gray-500">Overdue Invoices</p>
      <h2 class="text-2xl font-bold text-red-700">{{ overdue }}</h2>
    </div>
  </div>

  <!-- Users by Role -->
  <div class="bg-white shadow rounded-xl p-6 mb-6">
    <h3 class="text-xl font-bold mb-4">Users by Role</h3>
    <ul class="space-y-2">
      {% for role in users_by_role %}
      <li class="flex justify-between">
        <span>{{ role.role }}</span>
        <span class="font-bold">{{ role.count }}</span>
      </li>
      {% endfor %}
    </ul>
  </div>

  <!-- Recent Announcements -->
  <div class="bg-white shadow rounded-xl p-6">
    <h3 class="text-xl font-bold mb-4">Recent Announcements 📢</h3>
    <ul class="divide-y divide-gray-200">
      {% for a in recent_announcements %}
      <li class="py-2">
        <strong>{{ a.title }}</strong> — <span class="text-gray-500">{{ a.created_at|date:"M d, Y" }}</span>
        <p class="text-sm text-gray-700">{{ a.message|truncatechars:100 }}</p>
      </li>
      {% empty %}
      <li>No announcements yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
k