{% extends 'base.html' %} {% block title %}Fees - SchoolSystem{% endblock %} {%
block content %} 
{% block content %}
{% include "partials/_finance_header_tabs.html" %}
<form method="get" class="mb-4">
  <div class="flex">
    <input
      type="text"
      name="search"
      placeholder="Search by name"
      value="{{ request.GET.search }}"
      class="w-full p-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
    />
    <button
      type="submit"
      class="px-4 py-2 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 transition"
    >
      Search
    </button>
  </div>
</form>

<div
  class="overflow-hidden text-sm bg-white shadow-sm rounded-2xl border border-gray-100"
>
  <table class="min-w-full">
    <thead class="bg-gray-50">
      <tr>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wide"
        >
          #
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wide"
        >
          Name
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wide"
        >
          Amount
        </th>
        <th
          class="px-6 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wide"
        >
          Division
        </th>
        <th
          class="px-6 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wide"
        >
          Actions
        </th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-100">
      {% for fee in object_list %}
      <tr class="hover:bg-gray-50 transition">
        <td class="px-6 py-4 text-sm text-gray-500">{{ forloop.counter }}</td>
        <td class="px-6 py-4 font-medium text-gray-900">{{ fee.name }}</td>
        <td class="px-6 py-4 text-gray-700">{{ fee.amount }}</td>
        <td class="px-6 py-4 text-gray-700">
          {{ fee.division.name|default:"â€”" }}
        </td>
        <td
          class="px-6 py-4 text-right text-sm font-medium space-x-2 flex flex-row gap-2 justify-end"
        >
          <a
            href="{% url 'fees:edit_fee' fee.pk %}"
            class="inline-flex items-center px-3 py-1.5 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-100 transition"
          >
            <i class="fas fa-edit mr-1"></i> Edit
          </a>
          <a
            href="{% url 'fees:delete_fee' fee.pk %}"
            class="inline-flex items-center px-3 py-1.5 rounded-lg bg-red-50 text-red-600 hover:bg-red-100 transition"
          >
            <i class="fas fa-trash-alt mr-1"></i> Delete
          </a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="px-6 py-6 text-center text-sm text-gray-500">
          <i class="fas fa-info-circle mr-1"></i> No fees found.
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% if is_paginated %}
  <div class="flex justify-between items-center mt-6 p-4">
    <div class="text-sm text-gray-600">
      Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
    </div>
    <div class="space-x-2">
      {% if page_obj.has_previous %}
      <a
        href="?page=1{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}"
        class="px-3 py-1 border rounded hover:bg-gray-100"
        >First</a
      >
      <a
        href="?page={{ page_obj.previous_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}"
        class="px-3 py-1 border rounded hover:bg-gray-100"
        >Prev</a
      >
      {% endif %} {% if page_obj.has_next %}
      <a
        href="?page={{ page_obj.next_page_number }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}"
        class="px-3 py-1 border rounded hover:bg-gray-100"
        >Next</a
      >
      <a
        href="?page={{ page_obj.paginator.num_pages }}{% if request.GET.search %}&search={{ request.GET.search }}{% endif %}"
        class="px-3 py-1 border rounded hover:bg-gray-100"
        >Last</a
      >
      {% endif %}
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}
