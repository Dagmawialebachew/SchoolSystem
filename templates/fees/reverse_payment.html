<!-- templates/fees/reverse_payment.html -->
{% extends "base.html" %}
{% load widget_tweaks %}

{% block content %}
<div class="max-w-xl mx-auto bg-white rounded-lg shadow p-6">
  <h1 class="text-2xl font-semibold text-neutral-900 mb-4">Reverse Payment</h1>
  
  <p class="mb-4 text-neutral-700">
    Are you sure you want to reverse <strong>Payment #{{ payment.id }}</strong> 
    of <span class="text-success-600 font-bold">{{ payment.amount }}</span> 
    made on {{ payment.paid_on|date:"M d, Y" }}?
  </p>

  <form method="post" class="space-y-4">
    {% csrf_token %}
    <div>
      <label for="{{ form.reason_choice.id_for_label }}" class="form-label block text-sm font-medium text-neutral-700">
        Reason for reversal
      </label>
      {% render_field form.reason_choice|add_class:"form-select w-full rounded-md border border-gray-300 px-3 py-2 focus:ring focus:ring-blue-500 focus:border-blue-500" %}
    </div>

    <div>
      <label for="{{ form.custom_choice.id_for_label }}" class="form-label block text-sm font-medium text-neutral-700">
        Custom Reason <span class="text-sm opacity-90, italic, text-neutral-50">(only if other(specify) is selected)</span>
      </label>
      {% render_field form.custom_reason|add_class:"form-textarea w-full rounded-md border border-gray-300 px-3 py-2 focus:ring focus:ring-blue-500 focus:border-blue-500" %}
    </div>
    
    <div class="flex justify-end gap-3">
      <a href="{% url 'fees:payment_detail' student.pk %}" 
         class="px-4 py-2 rounded-md bg-neutral-200 hover:bg-neutral-300 text-neutral-800">
        Cancel
      </a>
      <button type="submit" 
              class="px-4 py-2 rounded-md bg-danger-500 hover:bg-danger-600 text-white">
        Reverse Payment
      </button>
    </div>
  </form>
</div>
{% endblock %}
