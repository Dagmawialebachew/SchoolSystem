{% extends 'base.html' %}

{% block title %}Students - SchoolSystem{% endblock %}

{% block content %}
{% include 'partials/breadcrumbs.html' with breadcrumbs=breadcrumbs %}

<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-montserrat font-semibold text-gray-900">Students</h1>
    {% if user.is_school_admin %}
    <a href="{% url 'students:add' %}" class="btn-primary">
        Add Student
    </a>
    {% endif %}
</div>

{% include 'partials/table.html' with table_headers="Name,Parent,Phone,Payment Status,Registration Date" show_actions=True %}

{% block table_row %}
<td class="px-6 py-4 whitespace-nowrap">
    <div class="text-sm font-medium text-gray-900">{{ item.full_name }}</div>
    <div class="text-sm text-gray-500">{{ item.date_of_birth }}</div>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    {{ item.parent_name }}
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    {{ item.parent_phone }}
</td>
<td class="px-6 py-4 whitespace-nowrap">
    <span class="px-2 py-1 text-xs rounded-full 
        {% if item.payment_status == 'PAID' %}bg-green-100 text-green-800
        {% elif item.payment_status == 'PENDING' %}bg-yellow-100 text-yellow-800
        {% else %}bg-red-100 text-red-800{% endif %}">
        {{ item.get_payment_status_display }}
    </span>
</td>
<td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
    {{ item.registration_date }}
</td>
{% endblock %}

{% block table_actions %}
{% if user.is_school_admin %}
<a href="{% url 'students:edit' item.pk %}" class="text-blue-600 hover:text-blue-900">Edit</a>
<a href="{% url 'students:delete' item.pk %}" class="text-red-600 hover:text-red-900">Delete</a>
{% endif %}
{% endblock %}

{% endblock %}